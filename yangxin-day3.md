#### 1.Mysql的存储引擎：

存储引擎就是Mysql建表的类型，不同的建表类型能够获取的速度、功能的支持不一样。存储引擎又称为 “表类型”。
Mysql存储类型有：*InnoDB(最常用)、MyISAM(常用)、ARCHIVE、MERGE、MEMORY*。  

**InnoDB**：对事物很好的支持，支持行级锁、拥有外键约束。他的设计目标是处理大容量的数据库系统，本身是基于Mysql后台的完整数据系统，Mysql运行InnoDB的时候会在内存建立缓冲池，用于缓冲数据和索引。ps：创建InnoDB类型的表会创建 .frm文件和ibd文件。.frm：存储表定义，ibd：存储数据和索引文件。

**MyISAM**：使用场景：被查询数据的量远远大于更新数据的量，MyISAM的查询速度很快，并且而且不占用大量内存和存储资源。但是不提供事务支持也不提供行级锁，写操作时会锁定整个表，所以更新操作比较低下。MyISAM存储了表的行数，如果有Select Count(*) from table时会直接读取已经保存的值而不需要全盘扫描。

**ARCHIVE**：归档的意思，在5.5后支持索引，拥有很好的压缩机制，经常作为仓库来使用。
**MEMORY**：特点是速度很快，逻辑存储介质是系统的内存，但是守护线程崩溃时会导致数据丢失。它要求存储的数据是长度不变的格式。
**MERGE**：是一组MERGE表的组合。

>MyISAM和InnoDB的区别：
>InnoDB索引文件本身就是数据，数据本身就是主索引，是聚集索引，MyISAM 的索引文件和数据文件分开的，是非聚集索引。并且InnoDB的不建议使用过长的主键，因为InnoDB生成的辅助索引存储记录的是主键的值而不是地址，所以主键变得大时，导致辅助索引也会变得很大，这样的话B+树索引的节点就会被填满，而影响速率。

****************
> 在数据库需求在select和insert比较剧烈的时候，选择MyISAM存储引擎是个不错的选择。如果数据库的要求热备 需要选择 InnoDB。
>
> > 什么是热备、冷备：
> >
> > **热备**：保证服务器不停止的情况下，另外一台机器对主服务器进行实时备份，当主服务器宕机时，从服务器就立马运行提供服务。在正常情况下 主服务器负责提供服务，从服务器负责数据的实时备份。
> >
> > **冷备**：服务器停止，数据库关闭后，进行备份。适用于所有的数据库模式。

***********

> 很多情况下尽管不需要事务都宁愿选择 InnoDB？
>
> 因为在数据量特别大的时候，系统的崩溃到恢复是个很重要的问题。MyISAM崩溃后发生损坏的概率比InnoDB要大得多，并且数据恢复也很缓慢。

**应用场景**

​	*日志型的应用*：对插入的速率要求比较高，选择MyISAM或者Archive比较好，他们的开销更低插入速度也非常的快。

> 如果我们需要将日志数据进行分析怎么办？怎么做才不会影响MyISAM/Archive的插入效率？

​	*订单处理的应用*：InnoDB是订单处理类应用的最佳选择。

​	*大数据量的应用*：在2-5TB的数据量下，如果使用MyISAM存储引擎，如果崩溃的话，就是非常非常难受的灾难。如果数据增长到10TB以上，将会采用数据仓库来解决方案，成功的数据仓库的解决是：Infobright，有些大数据库不适合Infobright，有可能适合TokuDB。

**转换表引擎**

​	在某些情况下，数据表想要满足新的功能需求，但是当前的存储引擎有不具有，往往存在转换表引擎。

​	①. Alter table 表名 engine=InnoDB。来操作，但是这会涉及到一个问题：这样操作的话会加锁整张表，执行需要很长的时间， 他是将原来表的数据复制到新建的一张表上，在复制这个时间段会占用机器上的所有io，如果在繁忙的表上这样操作，影响效率。

> 表转换：InnoDB-> MyISAM->InnoDB，会丢失原InnoDB上的外键

​	②. 导入和导出，使用mysqldump工具操作。

​	③.创建和查询，结合第一种方式和第二种方式，不需要导出整个表，创建一个新表，只导入一部分需要的数据(利用Insert---select来操作)

#### 2. 聚集索引

又称为聚簇索引在一个表中只有一个聚集索引，聚集索引的数据的物理地址顺序和表结构的列表顺序一致，故此只有一个聚集索引。

#### 3.Mysql中的多版本并发控制

>MVCC 其实度版本并发控制也可称为行级锁的优化，在更多的情况下，避免了加锁操作比如读数据，在写数据的时候，也只加锁必要的行，开销更低，实现了非阻塞式的读操作。

