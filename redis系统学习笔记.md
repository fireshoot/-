面试题：

* 在项目中缓存是如何使用的？缓存使用不当会造成什么后果？(那些地方用，为什么要用，不用行不行？用了后以后可能有什么不好的后果)。

>  1.为什么要用：高性能和高并发。高性能：有些数据在一定时间内不会改变，并且每次查询都是从mysql中查询，每次都是几百毫秒。于是使用redis缓存数据库的结果集，那么每次查询都会从缓存中拿取，速度就很快。缓存是走内存，内存天然很快，可以支撑4W/s也是没有什么问题，而数据库的一般不超过2000/s
>
> 2. 不良后果：缓存与数据库双写不一致、缓存雪崩、缓存穿透、缓存的并发竞争

#### redis和memcached的区别是什么？redis线程模型是什么？为什么单线程的redis比多线程的memcached效率高很多？(为什么redis是单线程但是可以支持高并发)

redis单线程NLO异步线程模型。

* redis比memcached的数据结构更多、操作更多、
* 简单的key-value存储，memcached的效率会更高；redis采用hash结构来说key-value，由于组合式的压缩，其内存利用率会高于memcached。
* 性能相比：redis单核，memcached是多核。redis存储小数据效率更高。
* 集群模式：memcached没有原生的集群模式，西药依靠客户端来实现往集群分片中写入数据。redis原生支持cluster模式。

redis的线程模型

* 客户端发送一个事件，redis的一个服务器socket通过io多路复用程序，然后放在一个事件队列中，在通过文件事件分离器分配给不同的事件处理器并返回响应的处理结果

为什么单线程可以支持这么高的并发

* redis的io多路复用可以同时监听几百上千个socket然而他的功能只有，监听，压进队列，速度和效率很高。然而各种事件处理器的速度和效率也很高。

> io多路复用是 非阻塞的io多路复用机制

* 纯内存的操作，内存本来就很快
* 单线程避免多线程上下文频繁切换的问题











